title: Interchange address instance
directive: ix-address-instance
classes:
  InterchangeAddressInstance:
    definition: |
      An interchange address instance is the representation of an address
      that conforms to an interchange address class, which in turn
      belongs to an interchange address profile.

      An address instance is considered to conform to an interchange
      address profile if it conforms to any of the profile's
      address classes.
    attributes:
      id:
        definition: Unique identifier for this interchange address instance.
        type: CharacterString
      name:
        definition: Human-readable name for the interchange address instance.
        type: CharacterString
        cardinality:
          min: 0
          max: 1
      profile:
        definition: The interchange address profile which contains the interchange address class it conforms to.
        type: InterchangeAddressProfile
      addressClass:
        definition: The interchange address class it conforms to.
        type: InterchangeAddressClass
      components:
        definition: Data values representing for a corresponding interchange address component.
        type: InterchangeAddressInstanceComponent
        cardinality:
          min: 0
          max: "*"
      features:
        definition: Representing features of this interchange address instance.
        type: AddressFeatureInstance
        cardinality:
          min: 0
          max: "*"
      applicability:
        definition: Spatial representation of the geographic area that this interchange address instance covers.
        type: MD_SpatialRepresentation
        cardinality:
          min: 0
          max: "*"
      validity:
        definition: The time interval with revision number where this interchange address profile is determined valid.
        type: Validity
        cardinality:
          min: 0
          max: 1
      displayTemplate:
        definition: Display template that this interchange address instance should be shown with. This allows an address originator to provide a desired display view of the address.
        type: DisplayTemplate
        cardinality:
          min: 0
          max: 1
      signature:
        definition: Cryptographic signature of the interchage address instance itself togerther with its content.
        type: Signature
        cardinality:
          min: 0
          max: 1

  InterchangeAddressInstanceComponent:
    definition: |
      An interchange address component instance represents a data value
      for a corresponding interchange address component.

      Each data value only applies to a single interchange
      address component which belongs to an interchange address class.
    attributes:
      type:
        definition: The interchange address component the value is for.
        type: InterchangeAddressComponent
      values:
        definition: Values for the interchange address component specified in `type`.
        type: AddressComponentDataValue
        cardinality:
          min: 1
          max: "*"
    relations:
      - target: InterchangeAddressInstance
        relationship:
          target:
            type: direct
        direction: up

  AddressFeatureInstance:
    definition: |
      The address feature instance is incorporated into an interchange
      address instance to mark its features as determined by an address
      processor.
    attributes:
      feature:
        definition: The particular address feature that has been fulfilled.
        type: AddressFeature
      signature:
        definition: |
          Cryptographic signature used to ensure that the
          feature is marked by an address process trusted for
          verification of this feature.
          The signature generated shall incorporate the `id` attribute
          of the interchange address instance that owns it.
        type: Signature
        cardinality:
          min: 0
          max: 1
    relations:
      - target: InterchangeAddressInstance
        relationship:
          target:
            type: direct
        direction: up

  AddressComponentDataValue:
    definition: |
      A single value for the interchange address instance component.
    attributes:
      type:
        definition: The data type of its value.
        type: AddressComponentDataType
      value:
        definition: The value of the specified component.
        type: CharacterString
    relations:
      - target: InterchangeAddressInstanceComponent
        relationship:
          target:
            type: direct
        direction: up

relations:
  - source: AddressFeature
    target: AddressFeatureInstance
    relationship:
      target:
        type: direct
    direction: up