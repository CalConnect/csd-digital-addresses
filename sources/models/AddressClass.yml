title: Interchange address class
directive: ix-address-class
classes:
  InterchangeAddressClass:
    definition: |
      Interchange address class corresponds to the `addressClass` specified in
      <<ISO19160-1>>.

      A single profile can include and support multiple types of
      address formats, such as a numbered street address and a
      "PO Box" address simultaneously. Each of these address formats
      is represented as an interchange address class.

      [example]
      The US Numbered Thoroughfare Address with this syntax can be
      represented as an interchange address class:

      *{sp}{ Complete Landmark Name or Complete Place Name } +
      *{sp}{ Complete Address Number * } +
      *{sp}{ Complete Street Name * } +
      *{sp}{ Complete Subaddress } +
      *{sp}{ Complete Place Name * } +
      *{sp}{ State Name * } +
      *{sp}{ Zip Code } +
      *{sp}{ Zip Plus 4 } +
      *{sp}{ Country Name }

      An interchange address class also provides a display template
      and a form template to allow the display and entry of an
      address instance of the address class.
    attributes:
      id:
        definition: Unique identifier of this interchange address class.
        type: CharacterString
      description:
        definition: Textual description of this interchange address class.
        type: CharacterString
      components:
        definition: Constituent parts of this interchange address class.
        type: InterchangeAddressComponent
        cardinality:
          min: 1
          max: "*"
      displayTemplate:
        definition: The template to instruct how to display an interchange address instance belonging to this interchange address class.
        type: DisplayTemplate
      formTemplate:
        definition: The template to instruct how to create an input form for applications requiring user input to create an interchange address instance belonging to this interchange address class.
        type: FormTemplate
    relations:
      target: InterchangeAddressComponent
      relationship:
        source:
          type: aggregation
          attributes:
            address:
              cardinality:
                min: 1
                max: "*"
        target:
          type: direct
          attributes:
            component:
              cardinality:
                min: 1
                max: "*"
      action:
        verb: comprises
        direction: target

  InterchangeAddressComponent:
    definition: |
      The interchange address component corresponds to the
      `addressComponent` defined in <<ISO19160-1>>.
    attributes:
      key:
        definition: An identifier of this interchange address component, shall be unique within the interchange address class.
        type: CharacterString
      description:
        definition: Textual description of this component.
        type: CharacterString
      dataType:
        definition: Describes the type of value accepted by this component. This takes an `AddressComponentDataType` value.
        type: AddressComponentDataType
      obligation:
        definition: Whether this component is mandatory, optional or disallowed. Values represented by the `ComponentObligation` object.
        type: ComponentObligation
      maxCardinality:
        definition: The maximum number of components within this address class.
        type: Integer
      minCardinality:
        definition: The minimum number of components within this address class.
        type: Integer
      example:
        definition: A textual example to demonstrate the correct use of this component.
        type: CharacterString
        cardinality:
          min: 0
          max: 1
    relations:
      - target: InterchangeAddressClass
        relationship:
          target:
            type: direct
        direction: up

enums:
  ComponentObligation:
    definition: A enumeration value to indicate a component to be mandatory, optional or disallowed.
    type: enumeration
    values:
      mandatory:
        definition: Indicating that a component must exist.
      optional:
        definition: Indicating that a component can exist.
      disallowed:
        definition: Indicating that a component must not exist.